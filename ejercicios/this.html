<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THIS</title>
</head>

<body>
    <a href="/ejercicios/">Go back</a>
    <p><em>Abre la consola</em></p>

    <h2><b>this</b> se refiere a un objeto. Ese objeto es el que actualmente esta ejecutando un pedazo de codigo</h2>

    <script>
        //This en el global scope--> toma el valor de window
        console.log('this: ' + this);

        //this en el scope de una funcion-->toma el valor de window porque la estamos ejecutando directamente
        function whoIsThis() {
            return this;
        }
        console.log('WhoIsThis: ' + whoIsThis());

        //this en el scope de una funcion en strict mode
        function whoIsThisStrictMode() {
            "use strict";
            return this;
        }
        console.log('whoIsThisStrictMode: ' + whoIsThisStrictMode());

        //this en el contexto de un objeto
        const person = {
            name: 'Jesus',
            saludar: function () {
                console.log('Hola, soy: ' + this.name);
            }
        }
        person.saludar();

        //this cuando sacamos una funcion de un objeto, 
        /*se pierde el contexto del this, 
        puesto que la referencia se invoca desde un contexto diferente*/
        const accion = person.saludar;
        accion();

        //this en el contexto de una "clase" -> las clases como tal no existen en Js
        //Aqui this se comporta refiriendose a la instancia  de la clase, igual que Java o C++
        function Person(name) {
            //this = {}
            this.name = name;
        }

        Person.prototype.saludar = function (){
            console.log('Me llamo: ' + this.name);
        }


        const angela = new Person("Angela");
        angela.saludar();
    </script>

</body>

</html>